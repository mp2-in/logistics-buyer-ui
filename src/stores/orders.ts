import { create } from 'zustand'
import { produce } from 'immer'
import { Api } from 'utils'

export interface Order {
    [k: string]: any,
    id: string,
    client_order_id: string,
    state: string,
    lsp: {
        id: string,
        name: string,
        item_id: string,
        network_order_id: string
    },
    price: number,
    distance: number,
    rider: {
        name: string,
        phone: string
    }
    created_at: string,
    assigned_at: string,
    pickedup_at: string,
    delivered_at: string,
    cancelled_at: string
}

interface Attributes {
    orders: Order[],
    activity: {[k: string]: boolean}
}

interface State extends Attributes {
    getOrders: (token: string) => void,
}

const initialState: Attributes = { orders: [], activity: {}};

export const useOrdersStore = create<State>()((set) => ({
    ...initialState,
    getOrders: async (token: string) => {
        set(produce((state: State) => {
            state.activity.getOrders = false
        }))
        Api('/webui/orders', { method: 'post', headers: { 'Content-Type': 'application/json', token }, data: {} })
            .then(res => {
                set(produce((state: State) => {
                    state.orders = res
                    state.activity.getOrders = false
                }))
            })
            .catch(() => {
                set(produce((state: State) => {
                    state.activity.getOrders = false
                    // state.orders = [{"id":"mp2i_cqial3kr4v5c","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"EXPRESS_PT40M","network_order_id":"ordmp2i_xx57qqvcggke"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-22 00:18:28","assigned_at":"2024-06-22 00:18:46","pickedup_at":"2024-06-22 00:19:17","delivered_at":"2024-06-22 00:20:04","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_bpmkqcvut5ux","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"EXPRESS_PT40M","network_order_id":"ordmp2i_majdfphg3jgg"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-22 00:16:56","assigned_at":"2024-06-22 00:17:20","pickedup_at":"2024-06-22 00:17:38","delivered_at":"2024-06-22 00:17:45","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_bm726phvpot7","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"RTO-Delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"EXPRESS_PT40M","network_order_id":"ordmp2i_6qja3bxaegbi"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 22:29:47","assigned_at":"2024-06-21 22:30:07","pickedup_at":"2024-06-21 22:30:49","delivered_at":"","cancelled_at":"2024-06-21 22:34:40","rto_initiated_at":"2024-06-21 22:34:40","rto_delivered_at":"2024-06-22 00:06:36","delivery_proof":"","cancellation":{"reason_id":"011","cancelled_by":"ondc-preprod.loadshare.net"},"note1":"","note2":""},{"id":"mp2i_etgupm2fxpme","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"EXPRESS_PT40M","network_order_id":"ordmp2i_bgg7oscdkh4f"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 21:54:16","assigned_at":"2024-06-21 21:54:28","pickedup_at":"2024-06-21 21:55:59","delivered_at":"2024-06-21 22:16:35","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_e5zzusm3dju7","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"EXPRESS_PT40M","network_order_id":"ordmp2i_r7e7znx7rnvw"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 21:52:29","assigned_at":"2024-06-21 21:52:45","pickedup_at":"2024-06-21 21:53:11","delivered_at":"2024-06-21 21:53:23","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_r2kxvcfjs4nf","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Cancelled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_fib3rr2plmoe","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"GUARANTEED_PT1H","network_order_id":"ordmp2i_thveffvf6dzo"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 21:48:43","assigned_at":"2024-06-21 21:49:08","pickedup_at":"2024-06-21 21:49:51","delivered_at":"2024-06-21 21:50:27","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_tx7cepkc2aet","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"GUARANTEED_PT1H","network_order_id":"ordmp2i_rrgrkebioovi"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 21:38:56","assigned_at":"2024-06-21 21:39:23","pickedup_at":"2024-06-21 21:39:42","delivered_at":"2024-06-21 21:40:45","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_lkrq7nu5vjio","client_order_id":"ORDg1h81mct26b1rn6k7tg9pejq23ba8","state":"Order-delivered","lsp":{"id":"ondc-preprod.loadshare.net","name":"LoadShare Networks","item_id":"GUARANTEED_PT1H","network_order_id":"ordmp2i_xnlanpppf2lq"},"price":25.42,"distance":217.6,"rider":{"name":"Mahesh","phone":"9900163002"},"created_at":"2024-06-21 20:21:29","assigned_at":"2024-06-21 20:23:29","pickedup_at":"2024-06-21 20:25:01","delivered_at":"2024-06-21 21:21:07","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_o7l5zmdux7ee","client_order_id":"autoselect568c4ada-5bf5-4408-a4b4-b33296e4614c","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_3gb6xfjpaxnh","client_order_id":"autoselect4c368a02-5bf1-4612-a810-5a247d01550f","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_pjdtgvuqvxm3","client_order_id":"autoselectc35b44d3-6c97-4d0e-8a78-b7bc8c0908fa","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_o2i37z2wa6dm","client_order_id":"autoselectfe3bfdc6-c149-4930-9ac6-be6e06c81d49","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_sclw7ejm5vhd","client_order_id":"autoselectae576730-076f-4bae-91e2-96997b0ce0b5","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_fz4coc57d3on","client_order_id":"autoselect1c10b030-67d5-4cfb-9e0a-9868a1f146dc","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_y3kb4ctvnsmb","client_order_id":"autoselect88990060-dfbb-4bdd-8195-f16ab92fe31b","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_jr553tst6ycg","client_order_id":"autoselectd4b1a6b4-c22a-4bac-a933-5ed9c386683f","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_365puo5qmhui","client_order_id":"autoselect32a4b5c0-4ac5-4caf-8c1d-bd2b5aac1018","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_667hecxcy4zy","client_order_id":"autoselect8fd9577f-9616-49da-a7bb-8906eeb667cc","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""},{"id":"mp2i_ute6ro24yzcc","client_order_id":"autoselect890e7767-b91d-4b56-8c98-ec16bf413137","state":"UnFulfilled","lsp":{"id":"","name":"","item_id":"","network_order_id":""},"price":0.0,"distance":0.0,"rider":{"name":"","phone":""},"created_at":"","assigned_at":"","pickedup_at":"","delivered_at":"","cancelled_at":"","rto_initiated_at":"","rto_delivered_at":"","delivery_proof":"","cancellation":{"reason_id":"","cancelled_by":""},"note1":"","note2":""}]
                }))
            })
    }
}))
